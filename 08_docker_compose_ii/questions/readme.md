# Вопросы к занятию "Особенности настройки кластера контейнеров"

Вопросы с выбором одного варианта из четырёх.

1. Какой ключ используется в файле `docker-compose.yml` для указания переменных окружения, которые необходимо передать в контейнер?
    - [x] environment
    - [ ] env
    - [ ] variables
    - [ ] vars
2. Какой ключ используется в файле `docker-compose.yml` для указания файла с переменными окружения?
    - [x] env_file
    - [ ] environment_file
    - [ ] variables_file
    - [ ] vars_file
3. Какой файл автоматически подставляет Docker Compose в файл `docker-compose.yml`, если переменные окружения объявлены в нём?
    - [x] .env
    - [ ] .vars
    - [ ] .variables
    - [ ] .env_file
4. Какой ключ используется в файле `docker-compose.yml` для указания аргументов сборки образа?
    - [x] build.args
    - [ ] image.args
    - [ ] build.arguments
    - [ ] image.variables
5. Какой ключ используется в файле `docker-compose.yml` для указания контекста сборки образа?
    - [x] build.context
    - [ ] image.context
    - [ ] build.dir
    - [ ] image.dir
6. Каким образом можно в `docker-compose.yml` ограничить процессорное время, доступное контейнеру?
    - [x] указать значение ключа `deploy.resources.limits.cpus`
    - [ ] указать значение ключа `deploy.resources.cpu_limit`
    - [ ] указать значение ключа `deploy.resources.cpu.quota`
    - [ ] указать значение ключа `deploy.resources.cpu.shares`
7. Каким образом можно в `docker-compose.yml` ограничить объём памяти, доступный контейнеру?
    - [x] указать значение ключа `deploy.resources.limits.memory`
    - [ ] указать значение ключа `deploy.resources.memory_limit`
    - [ ] указать значение ключа `deploy.resources.memory.quota`
    - [ ] указать значение ключа `deploy.resources.memory.shares`
8. Какой ключ используется в файле `docker-compose.yml` для указания ограничений ресурсов контейнера?
   - [x] deploy.resources
   - [ ] resources
   - [ ] limits
   - [ ] deploy.limits

## Вопросы на написание кода (essay)

1. Напишите пример файла `docker-compose.yml`, для приложения `Nginx Unit + PostgreSql`, соответствующий следующим требованиям
   1. В файле должно быть описано два сервиса: `web` и `db`
   2. Сервис `web` основан на образе `unit:php`
   3. Сервис `web` доступен на порту `8080` хостовой системы
   4. Сервис `web` получает файл переменных окружения из файла `config.env`
   5. Сервис `web` зависит от сервиса `db`
   6. Сервис `web` работает в сети `back-net`
   7. Сервис `web` монтирует том `web-data` в директорию `/www`
   8. Сервис `db` основан на образе `postgres:latest`
   9. Сервис `db` монтирует том `db-data` в директорию `/var/lib/postgresql/data`
   10. Сервис `db` получает переменные окружения из файла `db.env`
   11. Сервис `db` работает в сети `back-net`
   12. Также в файле описаны тома `web-data` и `db-data`
   13. Также в файле описана сеть `back-net`
2. Напишите пример файла `docker-compose.yml`, для приложения `Python + MariaDB`, соответствующий следующим требованиям:
   1. В файле должно быть описано два сервиса: `app` и `db`
   2. Сервис `app` основан на образе `python:3.9`
   3. Сервис `app` доступен на порту `8000` хостовой системы
   4. Сервис `app` получает переменные окружения из файла `app.env`
   5. Сервис `app` зависит от сервиса `db`
   6. Сервис `app` работает в сети `backend`
   7. Сервис `app` монтирует том `app-data` в директорию `/app`
   8. Сервис `db` основан на образе `mariadb:latest`
   9. Сервис `db` монтирует том `db-data` в директорию `/var/lib/mysql`
   10. Сервис `db` получает переменные окружения из файла `db.env`
   11. Сервис `db` работает в сети `backend`
   12. Также в файле описаны тома `app-data` и `db-data`
   13. Также в файле описана сеть `backend`
3. Напишите пример файла `docker-compose.yml`, для приложения `Node.js + MongoDB`, соответствующий следующим требованиям:
   1. В файле должно быть описано два сервиса: `app` и `db`
   2. Сервис `app` основан на образе `node:20-alpine`
   3. Сервис `app` доступен на порту `3000` хостовой системы
   4. Сервис `app` получает переменные окружения из файла `app.env`
   5. Сервис `app` зависит от сервиса `db`
   6. Сервис `app` работает в сети `internal`
   7. Сервис `app` монтирует том `app-data` в директорию `/app`
   8. Сервис `db` основан на образе `mongo:6.0`
   9. Сервис `db` монтирует том `db-data` в директорию `/data/db`
   10. Сервис `db` получает переменные окружения из файла `db.env`
   11. Сервис `db` работает в сети `backend`
   12. Также в файле описаны тома `app-data` и `db-data`
   13. Также в файле описана сеть `internal`
4. Напишите пример файла `docker-compose.yml` соответствующий следующим требованиям:
   1. В файле должно быть описано два сервиса: `app-service` и `cache-service`
   2. Сервис `app-service` собирается из контекста сборки `./app`
   3. Сервис `app-service` использует Dockerfile `./app/Dockerfile`
   4. Сервис `app-service` передаёт аргумент `BUILD_VERSION` со значением `1.0.0` в Dockerfile
   5. Сервис `app-service` доступен на порту `8000` хостовой системы
   6. Сервис `app-service` получает переменную окружения `REDIS_HOST` со значением `cache-service`
   7. Сервис `app-service` работает в сети `backend`
   8. Сервис `app-service` монтирует том `app-data` в директорию `/app`
   9. Сервис `cache-service` основан на образе `redis:latest`
   10. Сервис `cache-service` монтирует файл `mounts/redis.conf` в директорию `/usr/local/etc/redis/redis.conf`
   11. Сервис `cache-service` работает в сети `backend`
   12. Также в файле описан том `app-data`
   13. Также в файле описана сеть `backend`
5. Напишите пример файла `docker-compose.yml` который собирает web сервис `nginx + php-fpm + mysql`, соответствующий следующим требованиям:
   1. В файле должно быть описано три сервиса: `frontend`, `backend`, `database`
   2. Сервис `frontend` собирается из контекста сборки `./frontend`
   3. Сервис `frontend` доступен на порту `80` хостовой системы
   4. Сервис `frontend` получает переменные окружения из файлов `frontend.env` и `.env`
   5. Сервис `frontend` монтирует том `data` в директорию `/var/www/html`
   6. Сервис `frontend` зависит от сервиса `backend`
   7. Сервис `frontend` работает в сети `intranet`
   8. Сервис `backend` собирается из контекста сборки `./backend`
   9. Сервис `backend` получает переменные окружения из файлов `backend.env` и `.env`
   10. Сервис `backend` монтирует том `data` в директорию `/var/www/html`
   11. Сервис `backend` зависит от сервиса `database`
   12. Сервис `backend` работает в сети `intranet`
   13. Сервис `database` основан на образе `mysql:latest`
   14. Сервис `database` монтирует том `database` в директорию `/var/lib/mysql`
   15. Сервис `database` получает переменные окружения из файла `database.env`
   16. Сервис `database` работает в сети `intranet`
   17. Также в файле описаны тома `data` и `database`
   18. Также в файле описана сеть `intranet`
