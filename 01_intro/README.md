# Введение / История

- [Введение / История](#введение--история)
  - [Идея изоляции процессов](#идея-изоляции-процессов)
  - [Виртуализация и контейнеризация](#виртуализация-и-контейнеризация)
  - [Область применения](#область-применения)
  - [Преимущества и недостатки](#преимущества-и-недостатки)
  - [История развития контейнеризации](#история-развития-контейнеризации)
  - [Библиография](#библиография)
  - [Список терминов](#список-терминов)

Современные программы так или иначе используют модульную архитектуру: это обусловлено тем что программы запускаются в рамках операционной системы и взаимодействуют с ней. Однако, нередка ситуация, когда в операционной системе отсутствует некоторая библиотека, необходимая для запуска программы. В этом случае поставщику приложения необходима уверенность, что его продукт будет запускаться и работать независимо от окружения, поэтому он должен обеспечивать программу всеми зависимостями, а не надеяться на то, что в операционной системе на компьютере пользователя есть необходимая библиотека.

Другим важным моментом работы программ является безопасность: никакая другая программа не должна несанкционированно влиять каким-либо образом на работу программного продукта, так же как и сам программный продукт не должен оказывать действие на остальные программы.

Для решения этих проблем - полнота окружения программы и изоляция её от других программ - были предложены два подхода: виртуализация и контейнеризация (как частный случай виртуализации).

## Идея изоляции процессов

__Изоляция процессов__ - это возможность запускать несколько процессов в рамках одной операционной системы, но с изолированными друг от друга ресурсами. Такие процессы не могут влиять друг на друга, их работа не зависит друг от друга. Изоляция процессов позволяет запускать несколько приложений на одном хосте, не беспокоясь о том, что одно приложение может повлиять на работу другого. Изоляция процессов позволяет запускать несколько приложений на одном хосте, не беспокоясь о том, что одно приложение может повлиять на работу другого. Изоляция процессов позволяет запускать несколько приложений на одном хосте, не беспокоясь о том, что одно приложение может повлиять на работу другого.

Целью изоляции процессов является безопасность и надёжность работы приложений. Если одно приложение завершается с ошибкой, то это не влияет на работу других приложений. Если одно приложение подвергается атаке, то это не влияет на работу других приложений.

## Виртуализация и контейнеризация

Под __виртуализацией__ понимают технологию, которая позволяет запускать экземпляр некоторой операционной системы в рамках другой операционной системы (называемой __хостом__). Для виртуализации __гипервизор__ (программа виртуализации) реализует эмуляцию аппаратных средств (процессора, памяти, дискового пространства, сетевых интерфейсов и т.д.), то есть создаёт виртуальную машину, на которую устанавливается операционная система. Виртуализация позволяет запускать несколько экземпляров операционной системы на одном хосте. Каждый экземпляр имеет соответственно свои собственные процессы, файловую систему, сетевые интерфейсы и пользователей.

__Контейнеризация__ это метод виртуализации, в котором используются ресурсы ядра операционной системы. Это отличие от обычной виртуализации, в которой происходит аппаратная эмуляция. Часто контейнеризация используется для создания изолированных экземпляров конкретных приложений, а не операционной системы целиком. Эти изолированные экземпляры приложений называются контейнерами.

![Virtualization versus Containerization](images/01001_virtual_ws_container.png)

Контейнеризация, в отличие от виртуализации, потребляет значительно меньше ресурсов, так как:

- не выполняет эмуляцию аппаратных средств, а предоставляет доступ к аппаратным средствам хоста.
- не создаёт гостевой операционной системы, которая потребляет дополнительные ресурсы;

## Область применения

Появление виртуализации связано с потребностью предоставить рабочее пространство нескольким пользователям на одной физической машине. Со временем виртуализация стала играть важную роль в современных информационных технологиях и заняла центральное место в области облачных вычислений.

Также виртуализация позволяет создавать изолированные среды для разработки и тестирования программного обеспечения, что упрощает разработку и улучшает качество программного обеспечения.

Не смотря на то, что первоначальная идея контейнеризации касалась безопасности и надежности, сейчас контейнеры используются в основном для разработки, тестирования и развёртывания программных продуктов. Контейнеры позволяют создавать программные продукты, которые работают в любой операционной системе, не зависят от аппаратного обеспечения и не требуют установки дополнительных зависимостей.

Сфера применения контейнеров:

- _Разработка программных продуктов_ – создание программных продуктов возможно под любую операционную систему;
- _Тестирование программных продуктов_ - отладка программ в контейнерах безопаснее и проще;
- _Сборка программных продуктов_ - сборка программ в контейнерах позволяет избежать проблем с зависимостями;
- _Развертывание информационных систем_ - развёртывание кластера контейнеров сводится к созданию и запуску контейнеров на базе образов.

## Преимущества и недостатки

Успех технологии контейнеризации обеспечен её преимуществами, такими как:

- _Простота создания_ – контейнеры легко создавать, запускать и удалять;
- _Гибкая среда_ – создание, перезапуск и удаление контейнеров значительно быстрее работы с виртуальными машинами;
- _Малое потребление ресурсов_ - в отличие от виртуализации, контейнеры используют общее ядро ОС, что позволяет запускать большое количество контейнеров на одном хосте;
- _Повышенная производительность_ - в отличие от виртуализации, контейнеры используют общее ядро ОС, что позволяет запускать большое количество контейнеров на одном хосте;
- _Переносимость_ – контейнер встраивает все зависимости;
- _Стандартизация_ – основан на открытых стандартах;
- _Безопасность_ – каждый контейнер изолирует свои процессы от другого и от хоста.

Однако есть и некоторые недостатки контейнеризации:

- _Ограниченные возможности_ – контейнеры не могут работать с аппаратным обеспечением напрямую;
- _Повышенная сложность управления кластером контейнеров_ – управление взаимодействием группы контейнеров – нетривиальная задача.

Данные недостатки преодолеваются с развитием технологии контейнеризации, а также с описанием рекомендаций по использованию контейнеров. Несмотря на эти недостатки, контейнеры являются одной из самых популярных технологий в области разработки и развёртывания программных продуктов.

## История развития контейнеризации

История развития контейнеризации включает в себя виртуализацию, изоляцию процессов и контейнеризацию.

На заре развития информатики компьютеры (или ЭВМ, электронно-вычислительные машины) были очень дорогим и штучным инструментом, позволить который могли себе только наиболее крупные институты и предприятия. Вычислительные ресурсы приходилось экономить всеми возможными способами. Первые разработчики писали код в режиме «офлайн» и передавали их оператору ЭВМ, который последовательно вводил программы в машину и производил расчеты.

Первые попытки виртуализации были предприняты в 1960-х годах. В поисках путей решения проблемы оптимизации использования вычислительных ресурсов командой инженеров IBM был предложен новый подход – в рамках одной ЭВМ предоставить каждому пользователю виртуальную машину со своей ОС. В этом случае разрабатывался программный эмулятор для компьютеров IBM 7040, позволявший запускать несколько экземпляров приложения на одной машине. В 1966 году была создана первая виртуальная машина IBM VM/370. В перспективе такие эмуляторы должны были способствовать развитию аппаратно-независимых программ и облегчить переносимость кода на ЭВМ с другими архитектурами. Виртуализация требовалась и для совершенствования языков программирования высокого уровня: с ее помощью создавалась среда выполнения для пользовательских приложений, осуществлялась репликация операционной среды, эмулировалась система команд процессора.

Если появление виртуальных машин стало отправной точкой для развития систем контейнеризации, то поворотным моментом в их истории был, безусловно, 1979 год, когда в AT&T и Bell Laboratories разработали 7-ю версию Unix. Помимо прочих нововведений в этой версии появился системный вызов __chroot__, изменяющий местоположение корневой папки процесса и его дочерних элементов. Программа, запущенная в изменённом корневом каталоге, будет иметь доступ только к файлам в данном каталоге. Это заложило основу технологии изоляции процессов и разделения доступа к файлам для каждого процесса в Unix. В 1982 году chroot был включен в состав BSD, что позволило использовать аналогичные механизмы изоляции в производных системах.

В 1999 году в рамках одной операционной системы BSD можно было запускать несколько изолированных копий ОС, использующих общее ядро. Эта технология получила название __FreeBSD Jail__. Она позволяла создавать изолированные среды, в которых можно было запускать приложения, не влияя на работу других приложений. FreeBSD Jail был основан на chroot.

В 2005 году Sun Microsystems представила __Solaris Containers__ — первую реализацию контейнеров. Solaris Containers позволяли запускать несколько изолированных экземпляров операционной системы Solaris на одном хосте. Каждый экземпляр имел свои собственные процессы, файловую систему, сетевые интерфейсы и пользователей. Solaris Containers был основан на FreeBSD Jail.

В 2007 году компания Google представила технологию управления процессами __cgroups__ (control groups). Технологически cgroups — это группа процессов, для которых на уровне операционной системы наложены ограничения на использование различных ресурсов — памяти, ввода-вывода, сети. Такие изолированные группы процессов можно объединять в иерархические системы и управлять ими. Сgroups реализовывает не только изоляцию, но также приоритизацию (различным группам можно выделить разный объем ресурсов) и строгий учет. В 2008 году функциональность cgroups была включена в ядро Linux.

В 2013 году компания Docker представила систему контейнеризации __Docker__. Docker позволяет создавать образы приложений, запускать контейнеры и управлять ими. С момента появления на рынке Docker и внедрения на его основе многими облачными провайдерами услуги предоставления клиентам контейнеров, как сервиса, популярность этой технологии стала стремительно расти. Фактически, именно Docker стал основоположником целой экосистемы для управления контейнерами. Одним из ярких представителей этого семейства по праву считается Kubernetes.

> _В рамках данного курса будут изучаться именно контейнеры Docker._

В 2014 году компания Google представила систему управлением (оркестрация) __Kubernetes__. Kubernetes позволяет запускать и управлять множеством контейнеров. Kubernetes очень быстро стал самой популярной системой для автоматизации развёртывания, масштабирования и управления контейнеризированными приложениями промышленного уровня.

Безопасность и удобство контейнеров, а также высокая скорость развертывания привели к появлению отдельного направления DevOps, нацеленного на разработку контейнерных приложений, сокращающих время выхода новых проектов на рынок. С момента появления Kubernetes большинство крупнейших игроков на рынке облачных технологий, включая VMWare, Azure, AWS и других, объявили о его поддержке поверх собственных инфраструктур. Системы контейнеризации непрерывно развиваются, появляются новые инструменты для создания и развертывания контейнерных приложений, а также для управления большими кластерами контейнеров в центрах обработки данных. Kubernetes поддерживает все более сложные классы приложений, позволяющие предприятиям переходить как на гибридное облако, так и на микросервисные архитектуры. Контейнеризация превратилась в основу современной программной инфраструктуры, а Kubernetes сегодня используется в большинстве крупных корпоративных проектов.

## Библиография

- [CyberPaul, В изоляции. История появления и развития контейнеров, Serverspace, Habr.com](https://habr.com/ru/companies/serverspace/articles/741874/)
- [Docker, Docker History](https://docs.docker.com/engine/docker-overview/#docker-engine)
- [Wikipedia, FreeBSD Jail](https://en.wikipedia.org/wiki/FreeBSD_jail)
- [Wikipedia, Solaris Containers](https://en.wikipedia.org/wiki/Solaris_Containers)
- [Wikipedia, Docker](https://en.wikipedia.org/wiki/Docker_(software))
- [chroot, Wikipedia](https://en.wikipedia.org/wiki/Chroot)
- [cgroups, Wikipedia](https://en.wikipedia.org/wiki/Cgroups)
- [Kubernetes, Wikipedia](https://en.wikipedia.org/wiki/Kubernetes)

## Список терминов

- __виртуализация__ - технология, позволяющая запускать экземпляр операционной системы в рамках другой операционной системы.
- __контейнеризация__ - метод виртуализации, в котором используются ресурсы ядра операционной системы.
- __изоляция процессов__ - возможность запускать несколько процессов в рамках одной операционной системы, но с изолированными друг от друга ресурсами.
- __chroot__ - системный вызов Unix, изменяющий местоположение корневой папки процесса и его дочерних элементов.
- __гипервизор__ - программа виртуализации, реализующая эмуляцию аппаратных средств.
- __виртуальная машина__ - экземпляр операционной системы, запущенный в рамках другой операционной системы.
- __контейнер__ - изолированный экземпляр приложения, запущенный в рамках операционной системы.
