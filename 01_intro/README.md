# Введение

- [Введение](#введение)
  - [Виртуализация](#виртуализация)
    - [Понятие виртуализации](#понятие-виртуализации)
    - [Причины возникновения виртуализации](#причины-возникновения-виртуализации)
    - [Область применения](#область-применения)
    - [Преимущества и недостатки](#преимущества-и-недостатки)
  - [Контейнеризация](#контейнеризация)
    - [Идея изоляции процессов](#идея-изоляции-процессов)
    - [Понятие контейнеризации](#понятие-контейнеризации)
    - [Область применения](#область-применения-1)
    - [Преимущества и недостатки](#преимущества-и-недостатки-1)
  - [Основные понятия](#основные-понятия)
    - [API](#api)
    - [CI/CD](#cicd)
    - [DevOps](#devops)
    - [YAML](#yaml)
    - [Виртуализация](#виртуализация-1)
    - [Иммутабельность](#иммутабельность)
    - [Кластер](#кластер)
    - [Контейнер](#контейнер)
    - [Масштабирование](#масштабирование)
    - [Микросервис](#микросервис)
    - [Многокомпонентная архитектура](#многокомпонентная-архитектура)
    - [Монолитная архитектура](#монолитная-архитектура)
    - [Облако](#облако)
    - [Образ](#образ)
    - [Оркестрация](#оркестрация)
    - [Репозиторий](#репозиторий)
    - [Секрет](#секрет)
    - [Сервис](#сервис)
    - [Сервер](#сервер)
    - [Web сервис](#web-сервис)
    - [Сеть](#сеть)
    - [Том](#том)
  - [История развития виртуализации и контейнеризации](#история-развития-виртуализации-и-контейнеризации)
  - [Библиография](#библиография)

<div class="epigraph">

_Они стояли под деревом, обняв  друг  друга  за  плечи,  и  Алиса  сразу поняла, кто из них Труляля, а кто - Траляля,  потому  что  у  одного  на воротнике было вышито "ТРУ", а у другого - "ТРА"._ --- Льюис Кэролл, "Алиса в Зазеркалье"

</div>

## Виртуализация

Виртуализация играет важную роль в современных информационных технологиях и занимает центральное место в области облачных вычислений. Она позволяет запускать несколько виртуальных машин на одном физическом сервере, что увеличивает эффективность использования аппаратного обеспечения и упрощает управление инфраструктурой.

Также виртуализация используется для создания изолированных сред разработки и тестирования программного обеспечения, что способствует повышению качества и безопасности ПО.

### Понятие виртуализации

__Виртуализация__ — это технология, которая позволяет запускать экземпляр операционной системы в рамках другой операционной системы (называемой __хостом__). Для этого используется __гипервизор__ — программа, эмулирующая аппаратные средства (процессор, память, дисковое пространство, сетевые интерфейсы и т.д.) и создающая виртуальные машины, на которые устанавливаются операционные системы.

Каждая виртуальная машина полностью изолирована, имеет собственные процессы, файловую систему, сетевые интерфейсы, пользователей и ядро ОС. Виртуальные машины могут запускать разные операционные системы, отличные от хоста.

### Причины возникновения виртуализации

Виртуализация появилась из-за необходимости эффективного распределения вычислительных ресурсов между несколькими пользователями на одной физической машине. Со временем она стала основой для облачных вычислений и современных ИТ-инфраструктур.

### Область применения

Виртуализация применяется для консолидации серверов, повышения отказоустойчивости и масштабируемости, оптимизации использования аппаратных ресурсов, а также для создания изолированных сред разработки и тестирования.

### Преимущества и недостатки

| Преимущества                                                 | Недостатки                          |
| ------------------------------------------------------------ | ----------------------------------- |
| Возможность запуска нескольких ОС на одном компьютере        | Повышенные требования к ресурсам    |
| Масштабируемость                                             | Необходимость в специальных знаниях |
| Изоляция                                                     | Проблемы с лицензированием          |
| Гибкое управление выделением ресурсов                        |                                     |

## Контейнеризация

Контейнеризация — это технология изоляции приложений на уровне операционной системы, использующая общее ядро хоста и механизмы ядра ОС (namespaces, cgroups и др.) для изоляции и управления ресурсами. В отличие от виртуализации, контейнеры не эмулируют аппаратные средства и не требуют запуска отдельной гостевой операционной системы для каждого приложения.

Контейнеризация позволяет запускать несколько изолированных экземпляров приложений (контейнеров) на одном хосте, что повышает эффективность использования аппаратного обеспечения и упрощает управление инфраструктурой.

### Идея изоляции процессов

Современные приложения часто используют модульную архитектуру и требуют наличия определённых библиотек и зависимостей. Контейнеризация позволяет поставлять приложение вместе со всеми необходимыми зависимостями, обеспечивая его работоспособность независимо от окружения хоста.

Изоляция достигается с помощью механизмов ядра ОС, таких как namespaces и cgroups, что позволяет запускать несколько процессов в рамках одной операционной системы, но с изолированными друг от друга ресурсами.

### Понятие контейнеризации

__Контейнеризация__ — это технология, при которой приложения запускаются в отдельных контейнерах, использующих общее ядро хоста. Контейнеры обеспечивают изоляцию процессов и ресурсов, но не эмулируют аппаратное обеспечение.

Контейнеры позволяют создавать приложения, которые работают на любой системе с поддержкой контейнеризации и совместимым ядром (например, Linux-контейнеры — только на Linux). Это обеспечивает переносимость, стандартизацию и ускоряет процессы разработки, тестирования и развёртывания.

Однако контейнеры не обеспечивают такой же уровень изоляции и безопасности, как виртуальные машины, поскольку используют общее ядро хоста. Их возможности ограничены возможностями ядра операционной системы.

![Virtualization versus Containerization](images/01001_virtual_ws_container.png)

Контейнеризация, в отличие от виртуализации, потребляет значительно меньше ресурсов, так как:

- использует общее ядро ОС, а виртуализация требует отдельное ядро для каждой виртуальной машины;
- не выполняет эмуляцию аппаратных средств, а использует механизмы ядра ОС для изоляции и управления ресурсами;
- не создаёт гостевую операционную систему, которая потребляет дополнительные ресурсы.

### Область применения

Сегодня контейнеры в основном используются для разработки, тестирования и развёртывания приложений. Они позволяют создавать переносимые и стандартизированные среды, что особенно важно для DevOps-процессов, микросервисной архитектуры и облачных платформ.

Сферы применения контейнеров:

- _Разработка_ — создание приложений для различных операционных систем;
- _Тестирование_ — безопасная и быстрая отладка программ;
- _Сборка_ — сборка в контейнерах позволяет избежать проблем с зависимостями;
- _Развёртывание_ — автоматизация и масштабирование приложений в продакшене.

### Преимущества и недостатки

| Преимущества                  | Недостатки                                            |
| ----------------------------- | ----------------------------------------------------- |
| Простота создания             | Ограниченные возможности (зависимость от ядра ОС)     |
| Гибкая среда                  | Повышенная сложность управления кластером контейнеров |
| Малое потребление ресурсов    | Необходимость в специальных знаниях                   |
| Переносимость                 | Более низкая изоляция и безопасность по сравнению с ВМ|
| Стандартизация                | Ограниченная поддержка различных ОС внутри одного хоста|
| Изоляция процессов            |                                                      |
| Быстрое масштабирование       |                                                      |

__Пояснения к преимуществам:__

- _Простота создания_ — контейнеры легко создавать, запускать и удалять;
- _Гибкая среда_ — операции с контейнерами значительно быстрее, чем с виртуальными машинами;
- _Малое потребление ресурсов_ — контейнеры используют общее ядро ОС, что позволяет запускать их в большом количестве;
- _Переносимость_ — контейнер содержит все необходимые зависимости и может быть запущен на любой системе с поддержкой контейнеризации и совместимым ядром;
- _Стандартизация_ — основан на открытых стандартах;
- _Изоляция процессов_ — каждый контейнер изолирует свои процессы от других и от хоста;
- _Быстрое масштабирование_ — контейнеры можно быстро запускать и останавливать.

__Пояснения к недостаткам:__

- _Ограниченные возможности_ — контейнеры не могут напрямую взаимодействовать с аппаратным обеспечением, их возможности ограничены ядром хостовой ОС;
- _Повышенная сложность управления кластером контейнеров_ — требует специальных инструментов и знаний;
- _Более низкая изоляция и безопасность по сравнению с виртуальными машинами_ — контейнеры используют общее ядро, что может быть уязвимостью при неправильной настройке;
- _Ограниченная поддержка различных ОС внутри одного хоста_ — на одном хосте можно запускать только контейнеры, совместимые с ядром этой ОС.

Эти недостатки постепенно преодолеваются с развитием технологий контейнеризации и появлением новых инструментов для управления контейнерами.

## Основные понятия

Для того, чтобы разбираться в какой-либо области, необходимо иметь определенный словарь терминов. В данном разделе мы определяем основные понятия, которые используются в курсе.

### API

__API__ (Application Programming Interface) — интерфейс программирования приложений, который позволяет различным программам взаимодействовать друг с другом. API определяет набор функций и процедур, которые могут быть использованы разработчиками для создания приложений.

### CI/CD

__CI/CD__ (Continuous Integration/Continuous Deployment) — практика разработки программного обеспечения, которая включает в себя непрерывную интеграцию изменений в коде и непрерывное развертывание приложений. CI/CD позволяет автоматизировать процесс разработки, тестирования и развертывания приложений, что ускоряет выпуск новых версий и повышает качество программного обеспечения.

### DevOps

__DevOps__ — методология разработки программного обеспечения, которая объединяет разработчиков (Dev) и операционные команды (Ops) для улучшения сотрудничества и автоматизации процессов. DevOps направлен на ускорение выпуска программного обеспечения, повышение его качества и улучшение взаимодействия между командами.

### YAML

__YAML__ (YAML Ain't Markup Language) — формат сериализации данных, который используется для описания конфигураций в удобном для чтения человеком виде. YAML широко используется в контейнерных оркестраторах, таких как Kubernetes, для описания манифестов и конфигураций.

### Виртуализация

__Виртуализация__ — технология, позволяющая запускать несколько изолированных экземпляров операционных систем (виртуальных машин) на одном физическом сервере с помощью специального программного обеспечения — гипервизора. Виртуальные машины полностью изолированы друг от друга и могут запускать разные операционные системы.

### Иммутабельность

__Иммутабельность__ — концепция, согласно которой данные или объекты не могут быть изменены после их создания. В контексте контейнеризации и облачных технологий иммутабельность означает, что образы контейнеров и инфраструктура не изменяются после их создания, что обеспечивает предсказуемость и повторяемость развертываний.

### Кластер

__Кластер__ — группа серверов (узлов), объединённых для совместного выполнения задач. В контейнеризации кластер — это группа узлов, на которых оркестратор управляет контейнерами.

### Контейнер

__Контейнер__ — изолированная среда, запущенная на основе образа, включающая приложение и его зависимости, использующая общее ядро операционной системы хоста.

### Масштабирование

__Масштабирование__ — процесс увеличения производительности приложения путём увеличения количества ресурсов, выделяемых для его работы. В современных системах основной акцент делается на горизонтальное масштабирование — увеличение числа серверов или контейнеров.

### Микросервис

__Микросервис__ — небольшая, независимая и изолированная служба, которая выполняет одну конкретную функцию в приложении. Микросервисы взаимодействуют друг с другом через API и могут быть развернуты и масштабированы независимо друг от друга.

### Многокомпонентная архитектура

__Многокомпонентная архитектура__ — архитектура приложения, в которой приложение состоит из множества компонентов, каждый из которых может запускаться в отдельном процессе или контейнере.

Современные приложения являются сложными системами, состоящими из множества компонентов. Каждый компонент выполняет свою функцию, а взаимодействие между компонентами позволяет реализовать необходимую функциональность. Компоненты могут быть написаны на разных языках программирования, использовать разные базы данных, а также различные протоколы взаимодействия. Все это делает разработку и поддержку таких приложений сложной задачей. В случае, если приложение состоит из нескольких компонентов, то говорится, что у приложения __многокомпонентная__ или __модульная архитектура__.

Разработка приложений с многокомпонентной архитектурой является сложной задачей, однако, она имеет ряд преимуществ, а именно:

- __понимание__ - каждый компонент выполняет свою функцию, что упрощает понимание приложения;
- __поддержка__ - нет необходимости понимать весь код приложения, достаточно понимать только тот компонент, который необходимо поддерживать;
- __масштабирование__ - масштабирование приложения в случае многокомпонентной архитектуры является горизонтальным, что позволяет увеличивать производительность приложения путем увеличения количества компонентов;
- __обновление__ - в этом случае необходимо обновлять только те компоненты, которые изменились.

Частным случаем многокомпонентной архитектуры является __микросервисная архитектура__, роль модулей в которой играют web сервисы (микросервисы).

Для упрощения разработки и поддержки приложений используются контейнеры. Каждый компонент приложения запускается в отдельном контейнере, что позволяет разработчикам сосредоточиться на реализации функциональности компонента, а не на его интеграции с другими компонентами. Для запуска приложения необходимо запустить каждый контейнер, содержащий компоненты приложения, и настроить взаимодействие между ними.

### Монолитная архитектура

__Монолитная архитектура__ — архитектура приложения, в которой весь код и все компоненты запускаются в одном процессе (или контейнере).

### Облако

__Облако__ — группа компьютеров, объединённых в единую сеть с установленным специализированным программным обеспечением, предоставляющих ресурсы и услуги пользователям по требованию с возможностью масштабирования.

### Образ

__Образ__ — неизменяемый шаблон, содержащий всё необходимое для запуска приложения: само приложение, зависимости, конфигурационные файлы и данные. На основе образа создаются контейнеры.

### Оркестрация

__Оркестрация__ — автоматизация управления жизненным циклом контейнеров: развёртывание, масштабирование, обновление, восстановление и взаимодействие между контейнерами.

### Репозиторий

__Репозиторием__ называется хранилище каких-либо файлов, однако, в контексте контейнеризации в данных хранилищах содержатся образы. Репозитории могут быть публичными и приватными. Публичные репозитории доступны для скачивания всем желающим, приватные - только для определенных пользователей.

Наиболее популярным публичным репозиторием является [Docker Hub](https://hub.docker.com/), в котором хранятся образы, созданные сообществом.

### Секрет

__Секрет__ — информация, которая необходима для получения доступа, например, пароли или ключи (также могут быть логины или вообще конфиденциальные данные) и требует сокрытия. Секреты могут быть как статическими (например, пароли), так и динамическими (например, токены доступа). В контексте контейнеризации секреты используются для хранения конфиденциальной информации, такой как пароли, ключи API и другие данные, которые не должны быть доступны всем пользователям или контейнерам. Секреты могут храниться в специальных хранилищах или передаваться в контейнеры во время их запуска.

### Сервис

Любая программа облегчает пользователю некоторую задачу в той или иной мере. Однако, программы могут быть общего пользования, то есть оказывать услуги многим пользователям одновременно. Эти услуги могут быть различными, например, поиск информации в Интернете, отправка сообщений, хранение данных и т.д.

__Сервисом__ называется программа, обычно запускаемая на сервере, которая предоставляет узкоспециализированные услуги клиентам.

В контексте Web программирование сайт может быть представлен

- в виде одного сервиса (монолит, только одна точка входа),
- в виде множества несвязанных друг с другом (каждая страница полностью независима) сервисов, или
- в виде множества связанных друг с другом сервисов (микросервисная архитектура).

### Сервер

Сервер, в зависимости от контекста, имеет различное значение.

- __Сервер__ как аппаратная часть, представляет собой специализированный компьютер, на котором запускается серверное программное обеспечение. Данные компьютеры имеют высокую производительность, надежность и доступность, что позволяет обеспечить работу приложения в течение длительного времени.
- __Сервер__ как программная часть, представляет собой программу, которая предоставляет определенные услуги клиентам. Сервер может быть запущен на любом компьютере, однако, для обеспечения высокой доступности и надежности, серверы запускаются на специализированных компьютерах. Серверы запускаются в операционной системе в фоновом режиме, в Linux они называются демонами, в Windows - службами.

Основным требованием к серверам является __надежность__, так как они должны оказывать услуги (сервис) клиентам непрерывно, без перебоев. Сервер также может обладать рядом других свойств, в зависимости от решаемых им задач, например:

- __Производительность__ - способность сервера обрабатывать запросы клиентов за минимальное время.
- __Масштабируемость__ - способность сервера увеличивать производительность путем увеличения ресурсов, выделяемых для его работы.
- __Управляемость__ - способность сервера управляться удаленно, без необходимости физического присутствия администратора.

### Web сервис

__Web сервисом__ называется сервис, который предоставляет услуги посредством протокола HTTP. Web сервисы могут быть доступны как в локальной сети, так и в глобальной сети Интернет. На базе взаимодействия сервисов разрабатываются приложения с микросервисной архитектурой.

### Сеть

__Сеть__ — система, которая позволяет компьютерам обмениваться данными и ресурсами. В контексте контейнеризации сеть обеспечивает взаимодействие между контейнерами, узлами и внешними системами.

### Том

__Том__ — механизм в контейнеризации, который позволяет контейнерам сохранять данные вне их жизненного цикла. Тома могут быть использованы для хранения данных, которые должны сохраняться между перезапусками контейнеров.

## История развития виртуализации и контейнеризации

На заре развития информатики компьютеры были очень дорогими и доступны только крупным организациям. Вычислительные ресурсы приходилось экономить всеми возможными способами. Первые разработчики программ писали код на перфокартах и передавали их оператору, который последовательно вводил программы в машину. Использование ресурсов было неэффективным.

Первые попытки виртуализации были предприняты в 1960-х годах. Инженеры IBM предложили запускать на одной ЭВМ несколько виртуальных машин со своими ОС. В 1966 году была создана первая виртуальная машина IBM VM/370. Виртуализация позволила создавать аппаратно-независимые программы и облегчила переносимость кода.

Поворотным моментом для контейнеризации стал 1979 год, когда в AT&T и Bell Laboratories в 7-й версии Unix появился системный вызов __chroot__, изменяющий корневую папку процесса. Это заложило основу файловой изоляции. В 1999 году в FreeBSD появилась технология __Jail__, позволявшая запускать несколько изолированных копий ОС с общим ядром. В 2005 году Sun Microsystems представила __Solaris Containers__, а в 2007 году Google разработала технологию __cgroups__ для ограничения ресурсов процессов. В 2008 году cgroups были включены в ядро Linux.

В 2013 году компания Docker представила систему контейнеризации __Docker__, которая упростила создание, запуск и управление контейнерами. Docker стал основой современной экосистемы контейнеризации, а Kubernetes — самым популярным инструментом для оркестрации контейнеров.

> _В рамках данного курса будут изучаться именно контейнеры Docker._

В 2014 году Google представила систему управления контейнерами __Kubernetes__, которая быстро стала стандартом для автоматизации развёртывания, масштабирования и управления контейнеризированными приложениями.

Контейнеризация и оркестрация контейнеров стали основой современной программной инфраструктуры, а Kubernetes используется в большинстве крупных корпоративных проектов.

## Библиография

- [CyberPaul, В изоляции. История появления и развития контейнеров, Serverspace, Habr.com](https://habr.com/ru/companies/serverspace/articles/741874/)
- [Docker, Docker History](https://docs.docker.com/engine/docker-overview/#docker-engine)
- [Wikipedia, FreeBSD Jail](https://en.wikipedia.org/wiki/FreeBSD_jail)
- [Wikipedia, Solaris Containers](https://en.wikipedia.org/wiki/Solaris_Containers)
- [Wikipedia, Docker](https://en.wikipedia.org/wiki/Docker_(software))
- [chroot, Wikipedia](https://en.wikipedia.org/wiki/Chroot)
- [cgroups, Wikipedia](https://en.wikipedia.org/wiki/Cgroups)
- [Kubernetes, Wikipedia](https://en.wikipedia.org/wiki/Kubernetes)
- [__В чем разница между образами Docker и контейнерами?__, AWS Amazon](https://aws.amazon.com/ru/compare/the-difference-between-docker-images-and-containers/)
- [__Что такое контейнеризация?__, AWS Amazon](https://aws.amazon.com/ru/what-is/containerization/)
- [__Микрослужбы .NET: Архитектура контейнерных приложений .NET__, learn.microsoft.com, 2022](https://learn.microsoft.com/ru-ru/dotnet/architecture/microservices/)
- [simust, __Основы контейнеризации (обзор Docker и Podman)__, Habr.com, 2022](https://habr.com/ru/articles/659049/)
